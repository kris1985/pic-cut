# 数据管理概述

## 1.概述​

### 1.1应用场景​

数据管理是CMS的核心功能模块，用于对工程运行产生的数据进行统一归档和管理。它提供了一个集中化的方式来处理和存储数据，确保数据的完整性和可用性。数据管理能够存储和查询大量的业务关系数据，并支持数据的备份和还原操作。

在工业现场生产的过程中，会产生大量的运行数据，包括设备运行、故障报警、能源消耗、物料投入、产量数据、工艺追溯、人员记录

数据管理提供以下功能：

  * 基于事件触发的原始数据采集；
  * 基于计算公式的过程数据处理；
  * 基于分组汇总的分析数据聚合；



意味着可以通过灵活的配置，完成现场数据的自动采集、处理、归档、分析，包括但不限于以下业务场景：

  * 产量、不良品统计；
  * 设备状态时长分析；
  * 设备综合能耗分析；
  * 批次生产数据追溯；
  * 过程生产数据追溯；
  * 原料使用优化分析；



通过自定义的数据表结构配置和触发规则设置、统一的数据应用方法，简化了数据管理流程，提高了数据归档和应用的效率。

### 1.2功能介绍​

#### 工作区布局​

  * **数据表管理：** 展示当前工程可用的数据列表，支持文件夹进行自定义分类，可根据现场业务需要，进行新增对应类型的数据表或停用对应的数据表等操作；

  * **数据表配置：** 创建数据表之后，需要对数据表字段、触发事件、存储等规则进行配置；

> 注：配置可随时按需更新，但更新的配置仅对新归档的数据生效，旧数据保留不变，数据结构会自动兼容；

  * **数据表已归档记录预览：** 查看当前数据表已归档的数据记录，最多可看最新500条；




#### 数据表类型​

  * **变量归档：** 用于从变量处采集数据，并进行加工处理，在事件触发时记录到数据表中；

  * **数据聚合：** 需要关联一个原始表，用于对该数据表中的数据作聚合，并进行加工处理，在事件触发时记录或更新到数据表中；

> 注：1.原始表，可以是任意类型的其他数据表，包括变量归档、数据聚合、业务数据、基础数据； 
> 
> ​ 2.创建后，原始表关联项配置不可修改；

  * **业务数据：** 内置的数据表，无需创建，对应的配置在其他功能模块下，用于其他功能模块产生的业务数据的统一应用，例：报警管理的实时报警、历史报警记录，以及其他二次开发组件的配置数据、运行数据；

> 注：二次开发的插件，数据存储可以生成对应的业务数据表在该模块下，详情见CMS开发文档；




#### 数据表操作​

  * **创建：** 变量归档和数据聚合类型的数据表，需要手动创建，创建后可进行字段设置等数据表配置；

  * **启用/停用：** 对数据表进行启用或停用，被停用的数据表，在数据服务运行时，将不会生效；

  * **数据备份：** 将当前数据表已归档的数据进行全部导出，用于工程重要存储数据的手动备份及查看；

> 注：当前格式支持为CSV；

  * **数据清除：** 将当前数据表已归档的数据进行全部清除，用于工程调试过程中及部署前的旧数据清除；

  * **创建副本：** 以当前数据表的配置内容，创建一个数据表，不包括已归档数据，用于工程配置过程中的模版数据表应用或相似结构数据表的快速创建；

  * **删除：** 将当前数据表的配置及已归档内容进行删除，删除结果不可恢复，请提前确认；

> 注：若被删除的数据表，有作为原始表，被其他数据表关联，删除时将同步删除关联该表的数据表；
> 
> 例：存在数据表A、数据表B，数据表B的原始表关联了数据表A；
> 
> ​ 若确认删除数据表A后，将一并删除数据表B；若确认删除数据表B，不影响数据表A；




## 2.注意事项​

  1. 需要启用数据服务，才会进行数据归档，在配置的过程中，为提高配置效率，数据服务默认不启用，请点击运行设置按钮进行启动；
  2. 使用数据归档能力，为了获得更好体验，存储介质必须为SSD固态硬盘；
  3. 可基于现场部署硬件配置，引导客户配置定时清除或备份旧数据，保持常用数据的查询效率和存储利用率；




---

该文档地址来源：https://cms-docs.shengyc.com/cms/tutorial/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86%E6%A6%82%E8%BF%B0